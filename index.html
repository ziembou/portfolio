<!DOCTYPE html>
<html>
<head>
	<!--  *****   Link To Custom CSS Style Sheet   *****  -->
	<link rel="stylesheet" type="text/css" href="style.css">

	<!--  *****   Link To Font Awsome Icons   *****  -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"/>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Portfolio</title>
</head>
<body>
<section class="portfolio">
	
	<header class="section-head">
		<h1>Some Of My Latest Works</h1>
	</header>

	<main class="mainContainer">
		
		<!--  *****  Buttons Section Starts  *****  -->
		<div class="button-group">
			<button class="button active" data-filter="*">All</button>
			<button class="button" data-filter=".design">Design</button>
		<button class="button" data-filter=".cad">CAD</button>
			<button class="button" data-filter=".logo">Logo</button>
		</div>
		<!--  *****  Buttons Section Ends  *****  -->

		<!--  *****  Gallery Section Starts  *****  -->
		<div class="gallery">
			
			<!--  *****  Card 1 ENDS  *****  -->
						<!--  *****  Card 1 Starts  *****  -->
			<div class="item cad"
			  data-project='{
				"title":"Projekt XYZ1",
				"desc":"Opis projektuâ€¦",
				"content":[
				  {"type":"image","src":"design2.jpg"},
				  {"type":"youtube","id":"ScMzIvxBSi4"},
				  {"type":"video","src":"video.mp4"},
				  {"type":"image","src":"design3.jpg"},
				  {"type":"text","text":"Dodatkowy opis pod galeriÄ…"}
				]
			  }'>
			<img src="design3.jpg" alt="Car Configurator">

			  <div class="overlay">
				<a href="#" class="open-project">VIEW MORE1</a>

			  </div>

			</div>
			
			<!--  *****  Card 1 ENDS  *****  -->
			<!--  *****  Card 1 ENDS  *****  -->
						<!--  *****  Card 1 Starts  *****  -->
			<div class="item logo"
			  data-project='{
				"title":"Projekt XYZ2",
				"desc":"Opis projektuâ€¦",
				"content":[
				  {"type":"image","src":"design2.jpg"},
				  {"type":"text","text":"Dodatkowy opis pod galeriÄ…2"},
				  {"type":"video","src":"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"},
				  {"type":"image","src":"design1.jpg"},
				  {"type":"text","text":"Dodatkowy opis pod galeriÄ…"}
				]
			  }'>




			<img src="design2.jpg" alt="Car Configurator">

			  <div class="overlay">
				<a href="#" class="open-project">VIEW MORE2</a>

			  </div>

			</div>
			
			<!--  *****  Card 1 ENDS  *****  -->
						<!--  *****  Card 1 ENDS  *****  -->
						<!--  *****  Card 1 Starts  *****  -->
			<div class="item design"
			  data-project='{
				"title":"Projekt XYZ",
				"desc":"Opis projektuâ€¦",
				"content":[
				  {"type":"image","src":"design2.jpg"},
				  {"type":"video","src":"video.mp4"},
				  {"type":"image","src":"design1.jpg"},
				  {"type":"text","text":"Dodatkowy opis pod galeriÄ…"}
				]
			  }'>




			<img src="design2.jpg" alt="Car Configurator">

			  <div class="overlay">
				<a href="#" class="open-project">VIEW MORE3</a>

			  </div>

			</div>
			
			<!--  *****  Card 1 ENDS  *****  -->
								<!--  *****  Card 1 Starts  *****  -->
			<div class="item logo"
			  data-project='{
				"title":"Projekt XYZ",
				"desc":"Opis projektuâ€¦",
				"content":[
				  {"type":"image","src":"design2.jpg"},
				  {"type":"video","src":"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"},
				  {"type":"image","src":"design1.jpg"},
				  {"type":"text","text":"Dodatkowy opis pod galeriÄ…"}
				]
			  }'>




			<img src="design2.jpg" alt="Car Configurator">

			  <div class="overlay">
				<a href="#" class="open-project">VIEW MORE2</a>

			  </div>

			</div>
			
			<!--  *****  Card 1 ENDS  *****  -->
						<!--  *****  Card 1 ENDS  *****  -->
						<!--  *****  Card 1 Starts  *****  -->
			<div class="item design"
			  data-project='{
				"title":"Projekt XYZ",
				"desc":"Opis projektuâ€¦",
				"content":[
				  {"type":"image","src":"design2.jpg"},
				  {"type":"video","src":"video.mp4"},
				  {"type":"image","src":"design1.jpg"},
				  {"type":"text","text":"Dodatkowy opis pod galeriÄ…"}
				]
			  }'>




			<img src="design2.jpg" alt="Car Configurator">

			  <div class="overlay">
				<a href="#" class="open-project">VIEW MORE3</a>

			  </div>

			</div>
			
			<!--  *****  Card 1 ENDS  *****  -->
								<!--  *****  Card 1 Starts  *****  -->
			<div class="item logo"
			  data-project='{
				"title":"Projekt XYZ",
				"desc":"Opis projektuâ€¦",
				"content":[
				  {"type":"image","src":"design2.jpg"},
				  {"type":"video","src":"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"},
				  {"type":"image","src":"design1.jpg"},
				  {"type":"text","text":"Dodatkowy opis pod galeriÄ…"}
				]
			  }'>




			<img src="design2.jpg" alt="Car Configurator">

			  <div class="overlay">
				<a href="#" class="open-project">VIEW MORE2</a>

			  </div>

			</div>
			
			<!--  *****  Card 1 ENDS  *****  -->
						<!--  *****  Card 1 ENDS  *****  -->
						<!--  *****  Card 1 Starts  *****  -->
			<div class="item design"
			  data-project='{
				"title":"Projekt XYZ",
				"desc":"Opis projektuâ€¦",
				"content":[
				  {"type":"image","src":"design2.jpg"},
				  {"type":"video","src":"video.mp4"},
				  {"type":"image","src":"design1.jpg"},
				  {"type":"text","text":"Dodatkowy opis pod galeriÄ…"}
				]
			  }'>




			<img src="design2.jpg" alt="Car Configurator">

			  <div class="overlay">
				<a href="#" class="open-project">VIEW MORE3</a>

			  </div>

			</div>
			
			<!--  *****  Card 1 ENDS  *****  -->
			
	</div><!-- .gallery -->
		<!--  *****  Gallery Section Ends  *****  -->

	</main>

</section>
<div class="project-popup" id="projectPopup">
	<span class="close">&times;</span>
  <div class="popup-inner">
    

    <h2 id="popupTitle"></h2>
    <p id="popupDesc"></p>

    <div class="popup-gallery" id="popupGallery"></div>
  </div>
</div>


<!--   *****   JQuery Link   *****   -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>


<!--   *****   Isotope Filter Link   *****  -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js"></script>

<script type="text/javascript">
// =======================
var $gallery = $('.gallery');

$gallery.imagesLoaded(function () {
  $gallery.isotope({
    itemSelector: '.item',
    layoutMode: 'masonry',
    masonry: {
      columnWidth: '.item',
      gutter: 0
    }
  });
});

// ISOTOPE
// =======================
var $galleryContainer = $('.gallery').isotope({
  itemSelector: '.item',
  //layoutMode: 'fitRows'
});

$('.button-group .button').on('click', function(){
  $('.button-group .button').removeClass('active');
  $(this).addClass('active');

  var value = $(this).attr('data-filter');
  $galleryContainer.isotope({ filter: value });
});

// =======================
// OPEN PROJECT (overlay link)
// =======================
$('.gallery').on('click', '.overlay a', function (e) {
  e.preventDefault();
  const item = $(this).closest('.item');
  item.trigger('click');
});

// =======================
// OPEN POPUP
// =======================
$('.gallery').on('click', '.item', function () {

  const raw = $(this).attr('data-project');
  if (!raw) return;

  const project = JSON.parse(raw);

  $('#popupTitle').text(project.title || '');
  $('#popupDesc').text(project.desc || '');
  $('#popupGallery').html('');

  project.content.forEach(block => {

    // LOCAL MP4
    if (block.type === 'video') {
      $('#popupGallery').append(`
        <video class="popup-video-local" controls preload="metadata">
          <source src="${block.src}" type="video/mp4">
        </video>
      `);
    }

    // YOUTUBE (NO SRC YET!)
    if (block.type === 'youtube') {
      $('#popupGallery').append(`
        <div class="popup-video">
          <iframe
		  	data-src="https://www.youtube.com/embed/${block.id}?autoplay=1&mute=1"
			referrerpolicy="strict-origin-when-cross-origin"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
          </iframe>
        </div>
      `);
    }

    if (block.type === 'image') {
      $('#popupGallery').append(`<img src="${block.src}" class="popup-image">`);
    }

    if (block.type === 'text') {
      $('#popupGallery').append(`<p class="popup-text">${block.text}</p>`);
    }

  });

  // â¬‡ï¸ NAJPIERW OTWIERAMY POPUP
  $('#projectPopup').addClass('active');
  $('body').addClass('popup-open');

  // â¬‡ï¸ DOPIERO TERAZ AKTYWUJEMY YOUTUBE
  requestAnimationFrame(() => {
    $('#popupGallery iframe').each(function () {
      const src = $(this).data('src');
      if (src) $(this).attr('src', src);
    });
  });

});




// =======================
// CLOSE POPUP (X)
// =======================
$('.close').on('click', function () {
  closePopup();
});

// =======================
// CLOSE POPUP (BACKGROUND)
// =======================
$('#projectPopup').on('click', function (e) {
  if (e.target === this) {
    closePopup();
  }
});

$('.popup-inner').on('click', function(e){
  e.stopPropagation();
});

// =======================
// CLOSE FUNCTION
// =======================
function closePopup() {
  $('#projectPopup').removeClass('active');
  $('body').removeClass('popup-open');

  // ðŸ”‡ zatrzymanie YouTube
  $('#popupGallery').html('');
}



</script>
</body>
</html>